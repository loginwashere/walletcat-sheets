(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{262:function(e,t,a){e.exports=a(575)},267:function(e,t,a){},575:function(e,t,a){"use strict";a.r(t);var n,r,i,c,o,s=a(0),l=a.n(s),u=a(37),d=(a(267),a(16)),p=a(238),m=a(578),h=a(261),g=a(94),f=a(260),b=a(119),E=a(35),y=a.n(E),v=a(48),I=a(25),O=a(10),j=a(27);!function(e){e.currency="currency",e.category="category",e.account="account",e.transactionItem="transactionItem",e.transaction="transaction"}(c||(c={})),function(e){e.active="active",e.deleted="deleted"}(o||(o={}));var w,C=(n={},Object(j.a)(n,c.currency,["name","symbol","description","status","createdAt","updatedAt","deletedAt"]),Object(j.a)(n,c.category,["name","description","parentId","status","createdAt","updatedAt","deletedAt"]),Object(j.a)(n,c.account,["name","description","currencyId","status","createdAt","updatedAt","deletedAt"]),Object(j.a)(n,c.transactionItem,["transactionId","amount","accountId","description","status","createdAt","updatedAt","deletedAt"]),Object(j.a)(n,c.transaction,["categoryId","description","date","status","createdAt","updatedAt","deletedAt"]),n),S=(r={},Object(j.a)(r,c.currency,{keys:"currencyIds",values:"currencies"}),Object(j.a)(r,c.category,{keys:"categoryIds",values:"categories"}),Object(j.a)(r,c.account,{keys:"accountIds",values:"accounts"}),Object(j.a)(r,c.transactionItem,{keys:"transactionItemIds",values:"transactionItems"}),Object(j.a)(r,c.transaction,{keys:"transactionIds",values:"transactions"}),r),T=(i={},Object(j.a)(i,c.currency,"Currencies"),Object(j.a)(i,c.category,"Categories"),Object(j.a)(i,c.account,"Accounts"),Object(j.a)(i,c.transactionItem,"TransactionItems"),Object(j.a)(i,c.transaction,"Transactions"),i),N=function(e,t){return console.log("formatEntity",e,t),C[e].map(function(e){return t[e]})},A=function(e,t){return"".concat(T[e],"!A").concat(t+2)};!function(e){e.AUTH_CHANGED="@@walletcat/AUTH_CHANGED",e.AUTH_CLIENT_LOAD_REQUEST="@@walletcat/AUTH_CLIENT_LOAD_REQUEST",e.AUTH_CLIENT_LOAD_SUCCESS="@@walletcat/AUTH_CLIENT_LOAD_SUCCESS",e.AUTH_CLIENT_LOAD_FAILURE="@@walletcat/AUTH_CLIENT_LOAD_FAILURE",e.AUTH_CLIENT_INIT_REQUEST="@@walletcat/AUTH_CLIENT_INIT_REQUEST",e.AUTH_CLIENT_INIT_SUCCESS="@@walletcat/AUTH_CLIENT_INIT_SUCCESS",e.AUTH_CLIENT_INIT_FAILURE="@@walletcat/AUTH_CLIENT_INIT_FAILURE",e.INIT_LOAD_REQUEST="@@walletcat/INIT_LOAD_REQUEST",e.INIT_LOAD_SUCCESS="@@walletcat/INIT_LOAD_SUCCESS",e.INIT_LOAD_FAILURE="@@walletcat/INIT_LOAD_FAILURE",e.SPREADSHEET_CHANGED="@@walletcat/SPREADSHEET_CHANGED",e.SAVE_ENTITY_REQUEST="@@walletcat/SAVE_ENTITY_REQUEST",e.SAVE_ENTITY_SUCCESS="@@walletcat/SAVE_ENTITY_SUCCESS",e.SAVE_ENTITY_FAILURE="@@walletcat/SAVE_ENTITY_FAILURE",e.SIGN_IN="@@walletcat/SIGN_IN",e.SIGN_OUT="@@walletcat/SIGN_OUT"}(w||(w={}));var x=Object(I.createAsyncAction)(w.AUTH_CLIENT_LOAD_REQUEST,w.AUTH_CLIENT_LOAD_SUCCESS,w.AUTH_CLIENT_LOAD_SUCCESS)(),L=function(){return function(e){return e(x.request()),(t="client:auth2",new Promise(function(e){window.gapi.load(t,function(){e(!0)})})).then(function(){return e(x.success())}).catch(function(){return e(x.failure())});var t}},k=Object(I.createAction)(w.AUTH_CHANGED,function(e){return function(t){return e(t)}}),_=Object(I.createAsyncAction)(w.AUTH_CLIENT_INIT_REQUEST,w.AUTH_CLIENT_INIT_SUCCESS,w.AUTH_CLIENT_INIT_FAILURE)(),B=function(){return function(e){return e(_.request()),(t="".concat("660070124249-6nbgcsc4sknipqrsqf27v5lgsb7mokah.apps.googleusercontent.com"),window.gapi.client.init({discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],clientId:t,scope:"https://www.googleapis.com/auth/spreadsheets"})).then(function(){var t;return console.log("after client init"),e(_.success()),t=function(t){return e(k(t))},window.gapi.auth2.getAuthInstance().isSignedIn.listen(t),e(k(window.gapi.auth2.getAuthInstance().isSignedIn.get())),e(_.success())}).catch(function(t){return console.log("error",t),e(_.failure())});var t}},D=function(){return function(e,t){var a=t(),n=a.authClientLoad,r=a.authClientInit;n.loaded||n.loading||e(L()),!n.loaded||r.initiated||r.initiating||e(B())}},U=Object(I.createAsyncAction)(w.INIT_LOAD_REQUEST,w.INIT_LOAD_SUCCESS,w.INIT_LOAD_FAILURE)(),G=function(e){return function(t){t(U.request()),function(e){var t=e.spreadsheetId,a=e.ranges;return window.gapi.client.sheets.spreadsheets.values.batchGet({spreadsheetId:t,ranges:a})}({spreadsheetId:e,ranges:Object.keys(T).map(function(e){return"".concat(T[e],"!A2:K")})}).then(function(e){console.log("initLoad",e),t(U.success(e))}).catch(function(e){console.log(e),t(U.failure(e))})}},R=Object(I.createAction)(w.SPREADSHEET_CHANGED,function(e){return function(t){return e(t)}}),F=Object(I.createAsyncAction)(w.SAVE_ENTITY_REQUEST,w.SAVE_ENTITY_SUCCESS,w.SAVE_ENTITY_FAILURE)(),H=function(e){var t=e.type,a=e.entity;return function(e,n){e(F.request());var r=n().spreadsheetId;console.log("saveEntity",t,a),console.log("saveEntity",t,a,N(t,a)),(a.id?function(e,t,a){return window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e,range:a.id,valueInputOption:"USER_ENTERED",values:[N(t,Object(O.a)({},a,{updatedAt:new Date}))]})}(r.value,t,a):function(e,t,a){return window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:e,range:"".concat(T[t],"!A1"),valueInputOption:"USER_ENTERED",insertDataOption:"INSERT_ROWS",values:[N(t,Object(O.a)({},a,{createdAt:new Date}))]})}(r.value,t,a)).then(function(){var t=Object(v.a)(y.a.mark(function t(a){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),e(F.success(a)),t.prev=2,t.next=5,G(r.value)(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[2,7]])}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e(F.failure(t))})}},q=Object(I.createAction)(w.SIGN_IN,function(e){return function(){return window.gapi.auth2.getAuthInstance().signIn(),e()}}),V=Object(I.createAction)(w.SIGN_OUT,function(e){return function(){return window.gapi.auth2.getAuthInstance().signOut(),e()}}),P=a(5),W=a(6),Q=a(8),Y=a(7),z=a(9),M=a(577),J=a(14),K=a(242),$=a.n(K),X=a(116),Z=a.n(X),ee=a(53),te=a.n(ee),ae=a(61),ne=a.n(ae),re=a(243),ie=a.n(re),ce=a(160),oe=a.n(ce),se=a(241),le=a.n(se),ue=a(240),de=a.n(ue),pe=a(39),me=a.n(pe),he=a(84),ge=a.n(he),fe=a(26),be=a.n(fe),Ee=a(245),ye=a.n(Ee),ve=a(47),Ie=a.n(ve),Oe=a(239),je=a.n(Oe),we=a(29),Ce=a.n(we),Se=a(44),Te=a.n(Se),Ne=a(30),Ae=a.n(Ne),xe=a(244),Le=a.n(xe),ke={profile:"/me",spreadsheet:"/spreadsheet",accounts:{list:"/accounts/list",new:"/accounts/new",view:"/accounts/edit/:id"},currencies:{list:"/currencies/list",new:"/currencies/new",view:"/currencies/edit/:id"},categories:{list:"/categories/list",new:"/categories/new",view:"/categories/edit/:id"},transactions:{list:"/transactions/list",new:"/transactions/new",view:"/transactions/edit/:id"},default:"/"},_e=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(Q.a)(this,Object(Y.a)(t).call(this,e))).toggleDrawer=function(e){return function(){a.setState({isDrawerOpen:e})}},a.state={isDrawerOpen:!1},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"componentWillReceiveProps",value:function(){this.props.onApiInit()}},{key:"componentDidMount",value:function(){this.props.onApiInit()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.auth,r=t.data,i=t.authClientLoad,c=t.authClientInit;console.log("loading",this.props.authClientLoad.loading||this.props.authClientInit.initiating);var o=l.a.createElement("div",{className:a.list},l.a.createElement(Ie.a,null,l.a.createElement(M.a,{to:ke.currencies.new,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(me.a,null)),l.a.createElement(Ae.a,{primary:"New Currency"}))),l.a.createElement(M.a,{to:ke.currencies.list,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(ge.a,null)),l.a.createElement(Ae.a,{primary:"List Currencies"}))),l.a.createElement(M.a,{to:ke.categories.new,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(me.a,null)),l.a.createElement(Ae.a,{primary:"New Category"}))),l.a.createElement(M.a,{to:ke.categories.list,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(ge.a,null)),l.a.createElement(Ae.a,{primary:"List Categories"}))),l.a.createElement(M.a,{to:ke.accounts.new,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(me.a,null)),l.a.createElement(Ae.a,{primary:"New Account"}))),l.a.createElement(M.a,{to:ke.accounts.list,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(ge.a,null)),l.a.createElement(Ae.a,{primary:"List Accounts"}))),l.a.createElement(M.a,{to:ke.transactions.new,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(me.a,null)),l.a.createElement(Ae.a,{primary:"New Transaction"}))),l.a.createElement(M.a,{to:ke.transactions.list,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(ge.a,null)),l.a.createElement(Ae.a,{primary:"List Transactions"}))),l.a.createElement(M.a,{to:ke.spreadsheet,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(ge.a,null)),l.a.createElement(Ae.a,{primary:"Spreadsheet"})))),l.a.createElement(je.a,null),l.a.createElement(Ie.a,null,!n.signedIn&&l.a.createElement(Ce.a,{button:!0,onClick:function(t){t.preventDefault(),e.props.onSignIn()}},l.a.createElement(Te.a,null,l.a.createElement(de.a,null)),l.a.createElement(Ae.a,{primary:"Login"})),n.signedIn&&l.a.createElement(M.a,{to:ke.profile,className:a.sideListItem},l.a.createElement(Ce.a,{button:!0},l.a.createElement(Te.a,null,l.a.createElement(oe.a,null)),l.a.createElement(Ae.a,{primary:"Profile"}))),n.signedIn&&l.a.createElement(Ce.a,{button:!0,onClick:function(t){t.preventDefault(),e.props.onSignOut()}},l.a.createElement(Te.a,null,l.a.createElement(le.a,null)),l.a.createElement(Ae.a,{primary:"Logout"}))));return l.a.createElement("div",{className:a.container},l.a.createElement($.a,{position:"fixed"},l.a.createElement(Z.a,{variant:"dense"},l.a.createElement(ne.a,{className:a.menuButton,color:"inherit","aria-label":"Menu"},l.a.createElement(ie.a,{onClick:this.toggleDrawer(!0)})),l.a.createElement(te.a,{variant:"h6",color:"inherit",className:a.grow},l.a.createElement(M.a,{to:ke.default,className:a.brand},"Wallet Cat")),!n.signedIn&&l.a.createElement("div",null,l.a.createElement(be.a,{color:"inherit",disabled:this.props.authClientLoad.loading||this.props.authClientInit.initiating,onClick:function(t){t.preventDefault(),e.props.onSignIn()}},"Login")),n.signedIn&&l.a.createElement("div",null,l.a.createElement(ne.a,{color:"inherit",className:a.padding},l.a.createElement(M.a,{to:ke.profile,className:a.brand},l.a.createElement(oe.a,{fontSize:"small"}))),l.a.createElement(be.a,{color:"inherit",disabled:this.props.authClientLoad.loading||this.props.authClientInit.initiating,onClick:function(t){t.preventDefault(),e.props.onSignOut()}},"Logout")))),(r.processing||c.initiating||i.loading)&&l.a.createElement(Le.a,{className:a.progress,color:"secondary"}),l.a.createElement(ye.a,{open:this.state.isDrawerOpen,onClose:this.toggleDrawer(!1)},l.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer(!1),onKeyDown:this.toggleDrawer(!1)},o)))}}]),t}(s.Component),Be=Object(J.withStyles)(function(e){return{brand:{color:"inherit",textDecoration:"none",display:"flex",alignItems:"inherit",justifyContent:"inherit"},sideListItem:{color:"inherit",textDecoration:"none"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},list:{width:250},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},container:{marginBottom:48},progress:{position:"relative",top:49},padding:{padding:e.spacing.unit}}},{withTheme:!0})(_e),De=Object(d.c)(function(e){return{auth:e.auth,authClientLoad:e.authClientLoad,authClientInit:e.authClientInit,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{onApiInit:function(){return e(D())},onSpreadsheetIdChange:function(t){return e(R(t))},onInitLoad:function(t){return e(G(t))},onSignIn:function(){return q()},onSignOut:function(){return V()}}})(Be),Ue=a(17),Ge=a.n(Ue),Re=a(159),Fe=a(49),He=a.n(Fe),qe=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{component:"nav"},a.accountIds.map(function(e,n){var r=a.accounts[e];return l.a.createElement(M.a,{to:ke.accounts.view.replace(":id",e),className:t.sideListItem,key:n},l.a.createElement(Ce.a,{button:!0,dense:!0},l.a.createElement(Ae.a,{primary:r.name,secondary:r.description})))})))}}]),t}(s.Component),Ve=Object(J.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit},titlePrimary:{display:"flex",justifyContent:"space-between"},titleSecondary:{display:"flex",justifyContent:"space-between"},sideListItem:{color:"inherit",textDecoration:"none"}}},{withTheme:!0})(qe),Pe=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.spreadsheetId,r=e.data;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(Ve,{data:r})),a.signedIn&&n.value&&l.a.createElement(Re.a,{to:ke.accounts.new},l.a.createElement(He.a,{color:"primary","aria-label":"Add",className:t.fab},l.a.createElement(me.a,null))))}}]),t}(s.Component),We=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit}}},{withTheme:!0})(Pe),Qe=Object(d.c)(function(e){return{auth:e.auth,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{}})(We),Ye=a(41),ze=a(36),Me=a.n(ze),Je=a(42),Ke=a.n(Je),$e=a(156),Xe=a.n($e),Ze=a(162),et=a.n(Ze),tt=a(157),at=a.n(tt),nt=function(e){var t=e.classes,a=e.options,n=e.value,r=e.label,i=e.name,c=e.onChange,o=e.placeholder;return l.a.createElement(Ke.a,{className:t.formControl},l.a.createElement(Xe.a,{htmlFor:i},r),l.a.createElement(at.a,{value:n,onChange:c,displayEmpty:!1,name:i,className:t.select},l.a.createElement(et.a,{value:"",disabled:!0,key:""},o),a.map(function(e){return l.a.createElement(et.a,{value:e.value,disabled:e.disabled,key:e.value},e.label)})))},rt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var n=a.props,r=n.handleChange,i=n.setFieldTouched;t.persist(),r(t),i(e,!0,!1)}},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.classes,n=e.values,r=n.name,i=n.currencyId,c=n.description,o=e.errors,s=e.touched,u=e.isValid,d=e.handleSubmit;return l.a.createElement("form",{className:a.container,noValidate:!0,autoComplete:"off",onSubmit:d},l.a.createElement(Me.a,{id:"name",name:"name",label:"Name",helperText:s.name?o.name:"",error:s.name&&Boolean(o.name),className:a.textField,value:r,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(nt,{classes:a,label:"Currency",placeholder:"Currency",name:"currencyId",options:t.currencyIds.map(function(e){return{value:e,label:t.currencies[e].name}}),value:i,onChange:this.handleChange("currencyId")}),l.a.createElement("br",null),l.a.createElement(Me.a,{id:"description",name:"description",label:"Description",helperText:s.description?o.description:"",error:s.description&&Boolean(o.description),className:a.textField,value:c,onChange:this.handleChange("description"),margin:"normal"}),l.a.createElement(Ke.a,{className:a.formControlControls,fullWidth:!0},l.a.createElement(be.a,{variant:"contained",className:a.button,onClick:this.props.onGoBack},"Back"),l.a.createElement(be.a,{type:"submit",variant:"contained",color:"primary",disabled:!u,className:a.button},"Save")))}}]),t}(l.a.Component),it=Object(J.withStyles)(function(e){return{formControlControls:{display:"flex",flexDirection:"row",justifyContent:"space-between"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},button:{margin:e.spacing.unit},formControl:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,minWidth:200}}},{withTheme:!0})(rt),ct=a(31),ot=ct.object({spreadsheetId:ct.string().required("spreadsheetId is required")}),st=ct.object({categoryId:ct.string().required("category is required"),transactionItems:ct.array().of(ct.object().shape({amount:ct.number().required(),accountId:ct.string().required()})).min(2).required("category is required")}),lt=ct.object({name:ct.string().required("name is required"),symbol:ct.string().required("symbol is required"),description:ct.string()}),ut=ct.object({name:ct.string().required("name is required"),parentId:ct.string(),description:ct.string()}),dt=ct.object({name:ct.string().required("name is required"),currencyId:ct.string().required("currency is required"),description:ct.string()}),pt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(v.a)(y.a.mark(function e(t,n){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.onEntitySave({type:c.account,entity:t});case 3:n.setSubmitting(!1),a.props.history.push(ke.accounts.list),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0),n.setSubmitting(!1),n.setErrors(e.t0),n.setStatus({msg:"Set some arbitrary status or data"});case 13:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleGoBack=function(){return a.props.history.goBack()},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id?this.props.data.accounts[this.props.id]:{},a={id:t.id,name:t.name||"",currencyId:t.currencyId||"",status:t.status||o.active,description:t.description||""};return l.a.createElement(Ye.c,{render:function(t){return l.a.createElement(it,Object.assign({},t,{data:e.props.data,onGoBack:e.handleGoBack}))},initialValues:a,validationSchema:dt,onSubmit:this.handleSubmit})}}]),t}(s.Component),mt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(pt,{data:n,onEntitySave:this.props.onEntitySave,history:r})))}}]),t}(s.Component),ht=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(mt),gt=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(ht),ft=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history,i=e.match;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(pt,{data:n,onEntitySave:this.props.onEntitySave,history:r,id:i.params.id})))}}]),t}(s.Component),bt=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(ft),Et=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(bt),yt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{component:"nav"},a.currencyIds.map(function(e,n){var r=a.currencies[e];return l.a.createElement(M.a,{to:ke.currencies.view.replace(":id",e),className:t.sideListItem,key:n},l.a.createElement(Ce.a,{button:!0,dense:!0},l.a.createElement(Ae.a,{primary:r.symbol,secondary:r.name})))})))}}]),t}(s.Component),vt=Object(J.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit},titlePrimary:{display:"flex",justifyContent:"space-between"},titleSecondary:{display:"flex",justifyContent:"space-between"},sideListItem:{color:"inherit",textDecoration:"none"}}},{withTheme:!0})(yt),It=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.spreadsheetId,r=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(vt,{data:r}))),a.signedIn&&n.value&&l.a.createElement(Re.a,{to:ke.currencies.new},l.a.createElement(He.a,{color:"primary","aria-label":"Add",className:t.fab},l.a.createElement(me.a,null))))}}]),t}(s.Component),Ot=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit}}},{withTheme:!0})(It),jt=Object(d.c)(function(e){return{auth:e.auth,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{}})(Ot),wt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var n=a.props,r=n.handleChange,i=n.setFieldTouched;t.persist(),r(t),i(e,!0,!1)}},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.values,n=a.name,r=a.symbol,i=a.description,c=e.errors,o=e.touched,s=e.isValid,u=e.handleSubmit;return l.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:u},l.a.createElement(Me.a,{id:"name",name:"name",label:"Name",helperText:o.name?c.name:"",error:o.name&&Boolean(c.name),className:t.textField,value:n,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(Me.a,{id:"symbol",name:"symbol",label:"Symbol",helperText:o.symbol?c.symbol:"",error:o.symbol&&Boolean(c.symbol),className:t.textField,value:r,onChange:this.handleChange("symbol"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(Me.a,{id:"description",name:"description",label:"Description",helperText:o.description?c.description:"",error:o.description&&Boolean(c.description),className:t.textField,value:i,onChange:this.handleChange("description"),margin:"normal"}),l.a.createElement(Ke.a,{className:t.formControlControls,fullWidth:!0},l.a.createElement(be.a,{variant:"contained",className:t.button,onClick:this.props.onGoBack},"Back"),l.a.createElement(be.a,{type:"submit",variant:"contained",color:"primary",disabled:!s,className:t.button},"Save")))}}]),t}(l.a.Component),Ct=Object(J.withStyles)(function(e){return{formControlControls:{display:"flex",flexDirection:"row",justifyContent:"space-between"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},button:{margin:e.spacing.unit}}},{withTheme:!0})(wt),St=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(v.a)(y.a.mark(function e(t,n){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.onEntitySave({type:c.currency,entity:t});case 3:e.sent,n.setSubmitting(!1),a.props.history.push(ke.currencies.list),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error",e.t0),n.setSubmitting(!1),n.setErrors(e.t0),n.setStatus({msg:"Set some arbitrary status or data"});case 14:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleGoBack=function(){return a.props.history.goBack()},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id?this.props.data.currencies[this.props.id]:{},a={id:t.id,name:t.name||"",symbol:t.symbol||"",status:t.status||o.active,description:t.description||""};return l.a.createElement(Ye.c,{render:function(t){return l.a.createElement(Ct,Object.assign({},t,{onGoBack:e.handleGoBack}))},initialValues:a,validationSchema:lt,onSubmit:this.handleSubmit})}}]),t}(s.Component),Tt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(St,{data:n,onEntitySave:this.props.onEntitySave,history:r})))}}]),t}(s.Component),Nt=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(Tt),At=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(Nt),xt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history,i=e.match;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(St,{data:n,onEntitySave:this.props.onEntitySave,history:r,id:i.params.id})))}}]),t}(s.Component),Lt=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(xt),kt=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(Lt),_t=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{component:"nav"},a.categoryIds.map(function(e,n){var r=a.categories[e];return l.a.createElement(M.a,{to:ke.categories.view.replace(":id",e),className:t.sideListItem,key:n},l.a.createElement(Ce.a,{button:!0,dense:!0},l.a.createElement(Ae.a,{primary:r.name,secondary:r.description})))})))}}]),t}(s.Component),Bt=Object(J.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit},titlePrimary:{display:"flex",justifyContent:"space-between"},titleSecondary:{display:"flex",justifyContent:"space-between"},sideListItem:{color:"inherit",textDecoration:"none"}}},{withTheme:!0})(_t),Dt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.spreadsheetId,r=e.data;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(Bt,{data:r})),a.signedIn&&n.value&&l.a.createElement(Re.a,{to:ke.categories.new},l.a.createElement(He.a,{color:"primary","aria-label":"Add",className:t.fab},l.a.createElement(me.a,null))))}}]),t}(s.Component),Ut=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit}}},{withTheme:!0})(Dt),Gt=Object(d.c)(function(e){return{auth:e.auth,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{}})(Ut),Rt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var n=a.props,r=n.handleChange,i=n.setFieldTouched;t.persist(),r(t),i(e,!0,!1)}},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.classes,n=e.values,r=n.name,i=n.description,c=n.parentId,o=e.errors,s=e.touched,u=e.isValid,d=e.handleSubmit;return l.a.createElement("form",{className:a.container,noValidate:!0,autoComplete:"off",onSubmit:d},l.a.createElement(Me.a,{id:"name",name:"name",label:"Name",helperText:s.name?o.name:"",error:s.name&&Boolean(o.name),className:a.textField,value:r,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(nt,{classes:a,label:"Parent category",placeholder:"Parent category",options:t.categoryIds.map(function(e){return{value:e,label:t.categories[e].name}}),value:c||"",onChange:this.handleChange("parentId"),name:"parentId"}),l.a.createElement("br",null),l.a.createElement(Me.a,{id:"description",name:"description",label:"Description",helperText:s.description?o.description:"",error:s.description&&Boolean(o.description),className:a.textField,value:i,onChange:this.handleChange("description"),margin:"normal"}),l.a.createElement(Ke.a,{className:a.formControlControls,fullWidth:!0},l.a.createElement(be.a,{variant:"contained",className:a.button,onClick:this.props.onGoBack},"Back"),l.a.createElement(be.a,{type:"submit",variant:"contained",color:"primary",disabled:!u,className:a.button},"Save")))}}]),t}(l.a.Component),Ft=Object(J.withStyles)(function(e){return{formControlControls:{display:"flex",flexDirection:"row",justifyContent:"space-between"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},button:{margin:e.spacing.unit},formControl:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,minWidth:200}}},{withTheme:!0})(Rt),Ht=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(v.a)(y.a.mark(function e(t,n){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.onEntitySave({type:c.category,entity:t});case 3:n.setSubmitting(!1),a.props.history.push(ke.categories.list),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0),n.setSubmitting(!1),n.setErrors(e.t0),n.setStatus({msg:"Set some arbitrary status or data"});case 13:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleGoBack=function(){return a.props.history.goBack()},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id?this.props.data.categories[this.props.id]:{},a={id:t.id,parentId:t.parentId||"",name:t.name||"",status:t.status||o.active,description:t.description||""};return l.a.createElement(Ye.c,{render:function(t){return l.a.createElement(Ft,Object.assign({},t,{data:e.props.data,onGoBack:e.handleGoBack}))},initialValues:a,validationSchema:ut,onSubmit:this.handleSubmit})}}]),t}(s.Component),qt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(Ht,{data:n,onEntitySave:this.props.onEntitySave,history:r})))}}]),t}(s.Component),Vt=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(qt),Pt=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(Vt),Wt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history,i=e.match;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(Ht,{data:n,onEntitySave:this.props.onEntitySave,history:r,id:i.params.id})))}}]),t}(s.Component),Qt=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(Wt),Yt=Object(d.c)(function(e){return{auth:e.auth,data:e.data}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(Qt),zt=a(579),Mt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{component:"nav"},a.transactionIds.map(function(e,n){var r=a.transactions[e];return l.a.createElement(M.a,{to:ke.transactions.view.replace(":id",e),className:t.sideListItem,key:n},l.a.createElement(Ce.a,{button:!0,dense:!0},l.a.createElement(Ae.a,{primary:l.a.createElement("span",{className:t.titlePrimary},l.a.createElement("span",null,a.transactionItemIds.filter(function(e){return a.transactionItems[e]}).map(function(e){return a.transactionItems[e]}).filter(function(e){return e.transactionId===r.id}).filter(function(e){return e.status===o.active}).map(function(e,t){var n=a.accounts[e.accountId];return l.a.createElement(l.a.Fragment,{key:t},l.a.createElement("span",null,n.name," ",e.amount," ",a.currencies[n.currencyId].symbol)," -> ")}),l.a.createElement("span",null,r.toAccount," ",r.toAccountCurrency)),l.a.createElement("span",null,r.date)),secondary:l.a.createElement("span",{className:t.titleSecondary},l.a.createElement("span",null,a.categories[r.categoryId].name),l.a.createElement("span",null,r.amount))})))})))}}]),t}(s.Component),Jt=Object(J.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit},titlePrimary:{display:"flex",justifyContent:"space-between"},titleSecondary:{display:"flex",justifyContent:"space-between"},sideListItem:{color:"inherit",textDecoration:"none"}}},{withTheme:!0})(Mt),Kt=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.spreadsheetId;return a.signedIn&&!r.value?(console.log("TransactionListPage redirect"),l.a.createElement(zt.a,{to:ke.spreadsheet})):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:t.root},a.signedIn&&r.value&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(Jt,{data:n}))),a.signedIn&&r.value&&l.a.createElement(Re.a,{to:ke.transactions.new},l.a.createElement(He.a,{color:"primary","aria-label":"Add",className:t.fab},l.a.createElement(me.a,null))))}}]),t}(s.Component),$t=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit},titlePrimary:{display:"flex",justifyContent:"space-between"},titleSecondary:{display:"flex",justifyContent:"space-between"}}},{withTheme:!0})(Kt),Xt=Object(d.c)(function(e){return{auth:e.auth,authClientLoad:e.authClientLoad,authClientInit:e.authClientInit,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{onApiInit:function(){return e(D())},onSpreadsheetIdChange:function(t){return e(R(t))},onInitLoad:function(t){return e(G(t))}}})($t),Zt=a(255),ea=a.n(Zt),ta=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleDateChange=function(e){var t=a.props,n=t.setFieldTouched;(0,t.setFieldValue)("date",e),n("date",!0,!1)},a.handleChange=function(e){return function(t){var n=a.props,r=n.setFieldTouched,i=n.handleChange;t.persist(),i(t),r(e,!0,!1)}},a.handleFieldArrayChange=function(e){return function(t){a.handleChange(e)(t)}},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data;console.log("data",n),console.log("values",this.props.values);var r=this.props,i=r.values,c=i.categoryId,s=i.description,u=i.date,d=i.transactionItems,p=(r.errors,r.touched,r.handleChange,r.isValid),m=(r.setFieldTouched,r.handleSubmit);return l.a.createElement("form",{className:a.container,noValidate:!0,autoComplete:"off",onSubmit:m},l.a.createElement(Me.a,{id:"description",label:"Description",fullWidth:!0,className:a.textField,value:s,onChange:this.handleChange("description"),margin:"normal"}),l.a.createElement(b.a,{label:"Date",value:u,className:a.textField,onChange:this.handleDateChange,margin:"normal"}),l.a.createElement(nt,{classes:a,label:"Category",placeholder:"Category",options:n.categoryIds.map(function(e){return{value:e,label:n.categories[e].name}}),value:c,onChange:this.handleChange("categoryId"),name:"categoryId"}),l.a.createElement("br",null),l.a.createElement(Ye.b,{name:"transactionItems",render:function(t){return l.a.createElement(l.a.Fragment,null,d.filter(function(e){return e.status===o.active}).map(function(r,i){return l.a.createElement("div",{key:i,className:a.transactionItemsContainer},l.a.createElement(Ye.a,{type:"hidden",name:"transactionItems.".concat(i,".id"),value:r.id}),l.a.createElement(Ye.a,{name:"transactionItems.".concat(i,".amount"),render:function(t){var n=t.field;return l.a.createElement(Me.a,Object.assign({},n,{id:"transactionItems.".concat(i,".amount"),label:"Amount",className:a.textField,value:r.amount,onChange:e.handleFieldArrayChange("transactionItems.".concat(i,".amount")),margin:"normal"}))}}),l.a.createElement(nt,{classes:a,label:"Account",placeholder:"Account",options:n.accountIds.map(function(e){return{value:e,label:n.accounts[e].name}}),value:r.accountId,onChange:e.handleFieldArrayChange("transactionItems.".concat(i,".accountId")),name:"accountId"}),l.a.createElement(He.a,{size:"small",color:"secondary","aria-label":"Remove",onClick:function(){return t.remove(i)}},l.a.createElement(ea.a,null)))}),l.a.createElement(He.a,{size:"small",color:"secondary","aria-label":"Add",onClick:function(){return t.push({amount:"",accountId:"",status:o.active})}},l.a.createElement(me.a,null)))}}),l.a.createElement("br",null),l.a.createElement(Ke.a,{className:a.formControlControls,fullWidth:!0},l.a.createElement(be.a,{variant:"contained",className:a.button,onClick:this.props.onGoBack},"Back"),l.a.createElement(be.a,{type:"submit",variant:"contained",color:"primary",className:a.button,disabled:!p},"Save")))}}]),t}(s.Component),aa=Object(J.withStyles)(function(e){return{root:Object(O.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},fab:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},container:{},formControl:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,marginTop:2*e.spacing.unit,marginBottom:e.spacing.unit,minWidth:120},button:{margin:e.spacing.unit},formControlControls:{display:"flex",flexDirection:"row",justifyContent:"space-between"},transactionItemsContainer:{alignItems:"baseline",display:"flex",flexGrow:0}}},{withTheme:!0})(ta),na=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleSave=function(){var e=Object(v.a)(y.a.mark(function e(t,n){var r,i,s,l;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.onEntitySave({type:c.transaction,entity:t});case 3:return e.sent,r=t.id||A(c.transaction,a.props.data.transactionIds.length),console.log({transactionId:r}),i=t.transactionItems.map(function(){var e=Object(v.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.onEntitySave({type:c.transactionItem,entity:Object(O.a)({},t,{transactionId:r})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(i);case 9:return s=t.transactionItems.filter(function(e){return e.id}).map(function(e){return e.id}),l=a.props.data.transactionItemIds.map(function(e){return a.props.data.transactionItems[e]}).filter(function(e){return e.transactionId===r}).filter(function(e){return-1===s.indexOf(e.id)}).map(function(){var e=Object(v.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.onEntitySave({type:c.transactionItem,entity:Object(O.a)({},t,{transactionId:r,status:o.deleted,deletedAt:new Date})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.next=13,Promise.all(l);case 13:n.setSubmitting(!1),a.props.history.push(ke.transactions.list),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error",e.t0),n.setSubmitting(!1),n.setErrors(e.t0),n.setStatus({msg:"Set some arbitrary status or data"});case 23:case"end":return e.stop()}},e,this,[[0,17]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleGoBack=function(){return a.props.history.goBack()},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id?this.props.data.transactions[this.props.id]:{},a=this.props.data.transactionItemIds.map(function(t){return e.props.data.transactionItems[t]}).filter(function(e){return e.transactionId===t.id}).map(function(e){return{id:e.id,amount:e.amount||0,accountId:e.accountId||"",status:e.status||o.active}}),n=[{id:"",amount:0,accountId:"",status:o.active},{id:"",amount:0,accountId:"",status:o.active}],r={id:t.id,categoryId:t.categoryId||"",description:t.description||"",date:t.date||new Date,status:t.status||o.active,transactionItems:a.length?a:n};return console.log({values:r}),l.a.createElement(Ye.c,{render:function(t){return l.a.createElement(aa,Object.assign({},t,{data:e.props.data,onGoBack:e.handleGoBack}))},initialValues:r,validationSchema:st,onSubmit:this.handleSave})}}]),t}(s.Component),ra=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history,i=e.spreadsheetId;return console.log("data",n),console.log("history",r),a.signedIn&&!i.value?(console.log("TransactionNewPage redirect"),l.a.createElement(zt.a,{to:ke.spreadsheet})):l.a.createElement("div",{className:t.root},a.signedIn&&this.props.spreadsheetId&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(na,{data:n,history:r,onEntitySave:this.props.onEntitySave})))}}]),t}(s.Component),ia=Object(J.withStyles)(function(e){return{root:Object(O.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(ra),ca=Object(d.c)(function(e){return{auth:e.auth,authClientLoad:e.authClientLoad,authClientInit:e.authClientInit,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{onApiInit:function(){return e(D())},onSpreadsheetIdChange:function(t){return e(R(t))},onInitLoad:function(t){return e(G(t))},onEntitySave:function(t){return e(H(t))}}})(ia),oa=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.data,r=e.history,i=e.match,c=e.spreadsheetId;return console.log("data",n),console.log("history",r),l.a.createElement("div",{className:t.root},a.signedIn&&c.value&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(na,{data:n,history:r,onEntitySave:this.props.onEntitySave,id:i.params.id})))}}]),t}(s.Component),sa=Object(J.withStyles)(function(e){return{root:Object(O.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(oa),la=Object(d.c)(function(e){return{auth:e.auth,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{onEntitySave:function(t){return e(H(t))}}})(sa),ua=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var n=a.props,r=n.handleChange,i=n.setFieldTouched;t.persist(),r(t),i(e,!0,!1)}},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.values.spreadsheetId,n=e.errors,r=e.touched,i=e.isValid,c=e.handleSubmit;return l.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:c},l.a.createElement(Me.a,{id:"spreadsheetId",name:"spreadsheetId",label:"Spreadsheet Id",helperText:r.spreadsheetId?n.spreadsheetId:"",error:r.spreadsheetId&&Boolean(n.spreadsheetId),className:t.textField,value:a,onChange:this.handleChange("spreadsheetId"),margin:"normal"}),l.a.createElement(Ke.a,{className:t.formControlControls,fullWidth:!0},l.a.createElement(be.a,{variant:"contained",className:t.button,onClick:this.props.onGoBack},"Back"),l.a.createElement(be.a,{type:"submit",variant:"contained",color:"primary",disabled:!i},"Save")))}}]),t}(l.a.Component),da=Object(J.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},button:{margin:e.spacing.unit},formControlControls:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}},{withTheme:!0})(ua),pa=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e,t){a.props.onSpreadsheetChange(e),t.setSubmitting(!1),a.props.history.push(ke.default)},a.handleGoBack=function(){return a.props.history.goBack()},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t={spreadsheetId:this.props.spreadsheetId.value||""};return l.a.createElement(Ye.c,{render:function(t){return l.a.createElement(da,Object.assign({},t,{onGoBack:e.handleGoBack}))},initialValues:t,validationSchema:ot,onSubmit:this.handleSubmit})}}]),t}(s.Component),ma=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleChangeSpreadsheetId=function(e){var t=e.spreadsheetId;console.log("handleChangeSpreadsheetId",t),a.props.spreadsheetId.value!==t&&(a.props.onSpreadsheetIdChange(t),a.props.onInitLoad(t))},a}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,n=e.history;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},l.a.createElement(pa,{spreadsheetId:this.props.spreadsheetId,onSpreadsheetChange:this.handleChangeSpreadsheetId,history:n})))}}]),t}(s.Component),ha=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(ma),ga=Object(d.c)(function(e){return{auth:e.auth,authClientLoad:e.authClientLoad,authClientInit:e.authClientInit,data:e.data,spreadsheetId:e.spreadsheetId}},function(e){return{onApiInit:function(){return e(D())},onSpreadsheetIdChange:function(t){return e(R(t))},onInitLoad:function(t){return e(G(t))}}})(ha),fa=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth;return l.a.createElement("div",{className:t.root},a.signedIn&&l.a.createElement(Ge.a,{className:t.root,elevation:1},"Profile"))}}]),t}(s.Component),ba=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(fa),Ea=Object(d.c)(function(e){return{auth:e.auth}},function(e){return{}})(ba),ya=function(e){function t(){return Object(P.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(Ge.a,{className:e.root,elevation:1},"404 - Page Not Found"))}}]),t}(s.Component),va=Object(J.withStyles)(function(e){return{root:Object(O.a)({flexGrow:1},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}},{withTheme:!0})(ya),Ia=Object(d.c)(function(e){return{}},function(e){return{}})(va),Oa=function(e){var t=e.store,a=e.history;return l.a.createElement(d.a,{store:t.store},l.a.createElement(p.a,{loading:null,persistor:t.persistor},l.a.createElement(b.b,{utils:f.a},l.a.createElement(g.a,{history:a},l.a.createElement("div",null,l.a.createElement(De,null),l.a.createElement(m.a,null,l.a.createElement(h.a,{path:ke.spreadsheet,component:ga}),l.a.createElement(h.a,{path:ke.transactions.new,component:ca}),l.a.createElement(h.a,{path:ke.transactions.view,component:la}),l.a.createElement(h.a,{path:ke.transactions.list,component:Xt}),l.a.createElement(h.a,{path:ke.accounts.list,component:Qe}),l.a.createElement(h.a,{path:ke.accounts.new,component:gt}),l.a.createElement(h.a,{path:ke.accounts.view,component:Et}),l.a.createElement(h.a,{path:ke.currencies.list,component:jt}),l.a.createElement(h.a,{path:ke.currencies.new,component:At}),l.a.createElement(h.a,{path:ke.currencies.view,component:kt}),l.a.createElement(h.a,{path:ke.categories.list,component:Gt}),l.a.createElement(h.a,{path:ke.categories.new,component:Pt}),l.a.createElement(h.a,{path:ke.categories.view,component:Yt}),l.a.createElement(h.a,{path:ke.profile,component:Ea}),l.a.createElement(h.a,{path:ke.default,component:Xt,exact:!0}),l.a.createElement(h.a,{component:Ia})))))))},ja=a(256),wa=a.n(ja),Ca=a(46),Sa=a(257),Ta=a(258),Na=a(236),Aa=a(165),xa=a(259),La=a.n(xa),ka={auth:{signedIn:!1},authClientLoad:{loading:!1,loaded:!1,error:""},authClientInit:{initiating:!1,initiated:!1,error:""},data:{accountIds:[],accounts:{},categoryIds:[],categories:{},currencyIds:[],currencies:{},transactionIds:[],transactions:{},transactionItemIds:[],transactionItems:{},processing:!1,loading:!1,loaded:!1},spreadsheetId:{value:""}},_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(I.getType)(k):return Object(O.a)({},e,{signedIn:t.payload});default:return e}},Ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka.authClientLoad;switch((arguments.length>1?arguments[1]:void 0).type){case Object(I.getType)(x.request):return Object(O.a)({},e,{loading:!0});case Object(I.getType)(x.success):return Object(O.a)({},e,{loading:!1,loaded:!0});case Object(I.getType)(x.failure):return Object(O.a)({},e,{loading:!1,loaded:!1});default:return e}},Da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka.authClientInit;switch((arguments.length>1?arguments[1]:void 0).type){case Object(I.getType)(_.request):return Object(O.a)({},e,{initiating:!0});case Object(I.getType)(_.success):return Object(O.a)({},e,{initiating:!1,initiated:!0});case Object(I.getType)(_.failure):return Object(O.a)({},e,{initiating:!1,initiated:!1});default:return e}},Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka.data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(I.getType)(U.request):return Object(O.a)({},e,{processing:!0});case Object(I.getType)(U.success):if(!t.payload||!t.payload.result)return e;var a=t.payload.result.valueRanges;console.log({valueRanges:a});var n=Object.keys(T).reduce(function(e,t,n){var r,i,c=(a[n]&&a[n].values?a[n].values:[]).map((i=t,function(e,t){var a=C[i].reduce(function(t,a,n){return Object(O.a)({},t,Object(j.a)({},a,e[n]))},{});return Object(O.a)({},a,{id:A(i,t)})})).filter(function(e){return e.id}).reduce(function(e,t){return t.id?Object(O.a)({},e,Object(j.a)({},t.id,t)):e},{});return Object(O.a)({},e,(r={},Object(j.a)(r,S[t].keys,Object.keys(c)),Object(j.a)(r,S[t].values,c),r))},{});return Object(O.a)({},e,n,{processing:!1,loaded:!0,loading:!1});case Object(I.getType)(F.request):return Object(O.a)({},e,{processing:!0});case Object(I.getType)(F.success):return Object(O.a)({},e,{processing:!1});default:return e}},Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka.spreadsheetId,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(I.getType)(R):return Object(O.a)({},e,{value:t.payload});default:return e}},Ra=wa()({basename:"/walletcat-sheets"}),Fa=function(e){var t=e.preloadedState,a=e.history,n={key:"root",storage:La.a,blacklist:["auth","authClientLoad","authClientInit"]},r=Object(Aa.a)(n,function(e){return Object(Ca.combineReducers)({auth:_a,authClientLoad:Ba,authClientInit:Da,data:Ua,spreadsheetId:Ga,router:Object(g.b)(e)})}(a)),i=[Object(Na.a)(a),Sa.a],c=[Ca.applyMiddleware.apply(void 0,i)],o=Ta.composeWithDevTools.apply(void 0,c),s=Object(Ca.createStore)(r,t,o);return{store:s,persistor:Object(Aa.b)(s)}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(u.render)(l.a.createElement(Oa,{store:Fa({preloadedState:{},history:Ra}),history:Ra}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[262,1,2]]]);
//# sourceMappingURL=main.ff06ecb9.chunk.js.map